{"data":{"markdownRemark":{"fields":{"slug":"/2019-04-01-ionic2-internationalization-using-ng2-translate/"},"frontmatter":{"title":"Ionic2 - Internationalization using ng2-translate","date":"10 February 2017","excerpt":"To target target people from different countries, i18n support is required for your mobile app . Here in India where there are so many local languages, i18n support in mobile apps is must.","tags":["angular","ng2-translate","ionic","cordova"]},"html":"<p>To target target people from different countries, i18n support is required for your mobile app . Here in India where there are so many local languages, i18n support in mobile apps is must.</p>\n<p>In This blog, we will look how we can achieve i18n in ionic2 apps.</p>\n<p>We all know ionic2 is based on angular version 2. New angular version has it's own <a href=\"https://angular.io/docs/ts/latest/cookbook/i18n.html\">internationalization(i18n) approach</a>, but sadly this approach is <a href=\"https://github.com/driftyco/ionic/issues/8542\">not yet supported in ionic2</a>.</p>\n<p>Ionic team suggests to use ng2-translate for the internationalization in ionic2. Let's begin with it</p>\n<p>Create a blank application in ionic2</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ionic start --v2 i18Ionic blank</code></pre></div>\n<p>navigate to folder i18Ionic in terminal/cmd and install ng2-translate npm package in your ionic project</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install ng2-translate --save</code></pre></div>\n<p>Once the npm package is installed, we are ready to configure our application for i18n support.</p>\n<p>in ng2-translate, we need to create json specific to the languages which we want to support in our code. In this example we will support two languages Hindi(hi) and English(en). '<strong>hi</strong>' and '<strong>en</strong>' are the language code.</p>\n<p>create a folder <strong>i18n</strong> in <strong>assets</strong> folder of your ionic project, and add two files <strong>en.json</strong> and <strong>hi.json</strong> in i18n folder.</p>\n<p><strong>en.json</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;title&quot;:&quot;Change language&quot;,\n  &quot;welcome&quot;:&quot;an example of multi-language support&quot;,\n  &quot;language&quot;:&quot;Language&quot;\n}</code></pre></div>\n<p><strong>hi.json</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;title&quot;:&quot;भाषा बदलो&quot;,\n  &quot;welcome&quot;:&quot;बहु-भाषा समर्थन का उदाहरण&quot;,\n  &quot;language&quot;:&quot;भाषा&quot;\n}</code></pre></div>\n<p>now, let's create a provider which will keep the list of languages our application support, you can get this value form server too.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ionic g provider AppLanguages</code></pre></div>\n<p>it will create a file app-languages.ts in a folder named provider. Change your file app-languages.ts to look something as shown</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Injectable } from &#39;@angular/core&#39;;\n@Injectable()\nexport class AppLanguages {\n  private languages: String[];\n  constructor() {\n    this.languages = [&#39;en&#39;, &#39;hi&#39;];\n  }\n\n  public getLanguages(): String[] {\n    return this.languages;\n  }\n}</code></pre></div>\n<p>Open app.module.ts and import two HttpModule and TranslateModule</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { HttpModule, Http } from &#39;@angular/http&#39;;\nimport { TranslateModule, TranslateLoader, TranslateStaticLoader } from &#39;ng2-translate&#39;;\nimport { AppLanguages } from &#39;../providers/app-languages&#39;;</code></pre></div>\n<p>put the following code within app.module.ts</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export function createTranslateLoader(http: Http) {\n  return new TranslateStaticLoader(http, &#39;./assets/i18n&#39;, &#39;.json&#39;);\n}</code></pre></div>\n<p>Here we are exporting a function createTranslateLoader, which uses the TranslateStaticLoader service. TranslateStaticLoader is available by default in ng2-translate. it takes 3 parameteres. First is http service from angular package, second is the path of the language files, which we have created earlier and third is the format of the file which stores the language specific translations in key/value pair. in our case it is json file. You can keep language file on server too and can fetch it as required.</p>\n<p>Now change @NgModule to look something like this</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@NgModule({\n  declarations: [\n    MyApp,\n    HomePage\n  ],\n  imports: [\n    HttpModule,\n    TranslateModule.forRoot({\n      provide: TranslateLoader,\n      useFactory: (createTranslateLoader),\n      deps: [Http]\n    }),\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage\n  ],\n  providers: [\n    { provide: ErrorHandler, useClass: IonicErrorHandler },\n    AppLanguages\n  ]\n})\nexport class AppModule { }</code></pre></div>\n<p>as you can see we have included TranslateModule and using createTranslateLoader as factory.</p>\n<p>Now open app.component.ts and import</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { TranslateService } from &#39;ng2-translate&#39;;\nimport { AppLanguages } from &#39;../providers/app-languages&#39;;</code></pre></div>\n<p>now update your class MyApp to look something like this</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export class MyApp {\n  rootPage = HomePage;\n  constructor(platform: Platform, private translate: TranslateService,\n    private appLanguages: AppLanguages) {\n    platform.ready().then(() =&gt; {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      StatusBar.styleDefault();\n      Splashscreen.hide();\n      this.configNG2();\n    });\n  }\n\n  private configNG2() {\n    // this language will be used as a fallback when a translation isn&#39;t found in the current language\n    this.translate.setDefaultLang(&quot;en&quot;);\n    // Detect current Language\n    var userLang = navigator.language.split(&quot;-&quot;)[0];\n    userLang=(this.appLanguages.getLanguages().indexOf(userLang)&gt;-1)?userLang:&quot;en&quot;;\n    // the lang to use, if the lang is not available, it will use the current loader to get them\n    this.translate.use(userLang);\n  }\n}</code></pre></div>\n<p>TranslateService is the provided by ng2-translate. Here configNG2() is the function, which we have created. In configNG2(), <strong>this.translate.setDefaultLang(\"en\")</strong> set's the english as default language. <strong>navigator.language</strong> gives us the current language of the device, which we can use with <strong>this.translate.use()</strong> to set as the current language of our application on it's own. if the language of the device is not supported by our application, then we can set application language to default i.e \"en\".</p>\n<p>We want to allow our user's to change the application language if they want to. for this let's make some changes in home.ts and home.html</p>\n<p>Inject AppLangauge in the home.ts and change our home.ts </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Component } from &#39;@angular/core&#39;;\nimport { TranslateService } from &quot;ng2-translate&quot;;\nimport { NavController } from &#39;ionic-angular&#39;;\nimport { AppLanguages } from &#39;../../providers/app-languages&#39;; \n\n@Component({\n  selector: &#39;page-home&#39;,\n  templateUrl: &#39;home.html&#39;\n})\nexport class HomePage {\n  private languages: Array&lt;string&gt;;\n  constructor(public navCtrl: NavController, public translate: TranslateService\n  , public appLanguages: AppLanguages) {\n    this.languages = appLanguages.getLanguages();\n  }\n}</code></pre></div>\n<p>now configure home.html in your application as shown</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;ion-header&gt;\n  &lt;ion-navbar&gt;\n    &lt;ion-title&gt;\n      {{ &#39;title&#39; | translate}}\n    &lt;/ion-title&gt;\n  &lt;/ion-navbar&gt;\n&lt;/ion-header&gt;\n&lt;ion-content padding&gt;\n &lt;ion-list&gt;\n    &lt;ion-item&gt;\n      &lt;p&gt;{{&#39;welcome&#39; | translate}}&lt;/p&gt;\n    &lt;/ion-item&gt;\n    &lt;ion-item&gt;\n      &lt;ion-label&gt;{{&#39;language&#39; | translate}}&lt;/ion-label&gt;\n      &lt;ion-select [(ngmodel)]=&quot;currentLang&quot; (ionchange)=&quot;translate.use(currentLang)&quot;&gt;\n        &lt;ion-option *ngfor=&quot;let language of languages&quot; [value]=&quot;language&quot; [selected]=&quot;language === translate.currentLang&quot;&gt;{{ language }}&lt;/ion-option&gt;\n      &lt;/ion-select&gt;\n    &lt;/ion-item&gt;\n  &lt;/ion-list&gt;\n&lt;/ion-content&gt;</code></pre></div>\n<p>translate is the inbuilt pipe provided by ng2-translate for translation. Here title, welcome and language are the keys and value for them will be updated based on the language file. Build your application or run it on browser using ionic cli. The Output will look something as shown:</p>\n<p><img src=\"/assets/en-ng2-translate.png\" alt=\"English\" title=\"English\"></p>\n<p><img src=\"/assets/hi-ng2-translate.png\" alt=\"Hindi\" title=\"Hindi\"></p>\n<p>That's it our app is now supporting i18n feature, we can add as many as languages to our application, which we want to support.</p>\n<p><a href=\"https://github.com/nitishkumar71/i18Ionic\">GitHub Link</a></p>","id":"28f1d18c-9634-5593-a2f8-f7e3e90a692d"}},"pageContext":{"pathSlug":"/2019-04-01-ionic2-internationalization-using-ng2-translate/","next":{"fields":{"slug":"/2019-04-01-ionic2-how-to-use-d3-js/"},"frontmatter":{"title":"Ionic2 - How to use D3 JS"},"fileAbsolutePath":"/media/nitish/3E1698381697EEE1/Practice/blog.nitishkumarsingh.xyz/posts/2019-04-01-ionic2-how-to-use-d3-js.md"},"previous":{"fields":{"slug":"/2019-04-01-ionic2-security-for-cordova-mobile-applications/"},"frontmatter":{"title":"Ionic2 - Security for Cordova mobile applications"},"fileAbsolutePath":"/media/nitish/3E1698381697EEE1/Practice/blog.nitishkumarsingh.xyz/posts/2019-04-01-ionic2-security-for-cordova-mobile-applications.md"}}}