{"data":{"markdownRemark":{"fields":{"slug":"/2019-03-31-ionic2-secure-storage-in-mobile-application/"},"frontmatter":{"title":"Ionic2 - Secure Storage in mobile application","date":"25 February 2017","excerpt":"Securing communication between mobile application and back-end server is crucial. We should authenticate the requests sent from mobile applications before serving them. Authentication may require username and password for the user, which most of the developers store into mobile local-storage.  Storing sensitive information in local-Storage is a very bad practice, instead you should use other options such as JWT tokens or Social providers.","tags":["cordova","ionic","security","secure-storage"]},"html":"<p>Securing communication between mobile application and back-end server is crucial. We should authenticate the requests sent from mobile applications before serving them. Authentication may require username and password for the user, which most of the developers store into mobile local-storage.  Storing sensitive information in local-Storage is a very bad practice, instead you should use other options such as JWT tokens or Social providers. To get more information look to Security for Cordova mobile applications.</p>\n<p>An token is also an sensitive information, which we need to store somewhere, so what shall we do?\nThank God cordova have such large community support, we will look for one of such plugin which can help us here.</p>\n<p>Before using plugin, lets first create the blank ionic2 application</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ionic start --v2 SecureStorageExample blank</code></pre></div>\n<p>navigate to the directory of your application  and add the secure storage plugin using the below command</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ionic plugin add cordova-plugin-secure-storage</code></pre></div>\n<p>once the plugin get's added, our plugin folder will have one more directory for secure storage as shown</p>\n<p><img src=\"/assets/plugin-list.png\" alt=\"Folder Structure\" title=\"Folder Structure\"></p>\n<p>now let's open app.module.ts and import SecureStorage</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { SecureStorage } from &#39;ionic-native&#39;;</code></pre></div>\n<p>now add secure storage into providers of module, which will make our code to look something like below </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { NgModule, ErrorHandler } from &#39;@angular/core&#39;;\nimport { IonicApp, IonicModule, IonicErrorHandler } from &#39;ionic-angular&#39;; \nimport { SecureStorage } from &#39;ionic-native&#39;; \nimport { MyApp } from &#39;./app.component&#39;; \nimport { HomePage } from &#39;../pages/home/home&#39;; \n@NgModule({ \n    declarations: [MyApp, HomePage], \n    imports: [IonicModule.forRoot(MyApp)], \n    bootstrap: [IonicApp], \n    entryComponents: [MyApp, HomePage], \n    providers: [SecureStorage, { provide: ErrorHandler, useClass: IonicErrorHandler }] \n}) \nexport class AppModule { }</code></pre></div>\n<p>now let's see secure storge in action. first we will import SecureStorage in app.component.ts. Change the app.component.ts as shown</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Component } from &#39;@angular/core&#39;;\nimport { Platform } from &#39;ionic-angular&#39;;\nimport { StatusBar, Splashscreen } from &#39;ionic-native&#39;;\nimport { HomePage } from &#39;../pages/home/home&#39;;\nimport { SecureStorage } from &#39;ionic-native&#39;;\n@Component({  templateUrl: &#39;app.html&#39;})\nexport class MyApp {  \n    rootPage = HomePage;  \n    constructor(platform: Platform, secureStorage: SecureStorage) {    \n        platform.ready().then(() =&gt;{      \n            // Okay, so the platform is ready and our plugins are available.      \n            // Here you can do any higher level native things you might need.      \n            StatusBar.styleDefault();      \n            Splashscreen.hide();      \n            //name of our secure storage application, if it&#39;s already created then it won&#39;t be created    \n            secureStorage.create(&#39;funWithHybrid&#39;).then(        \n                () =&gt; {          \n                    console.log(&quot;Secure Storage is ready&quot;);\n                    },       \n                (error) =&gt; {          \n                    //there should be screen lock available in your application with pin or pattern          \n                    console.log(error);        \n                }      \n            );    \n        });  \n    }\n}</code></pre></div>\n<p>Let me explain the above code to you. First we will create a secure storage specific to our application. here we will name it \"funWithHybrid\". This is a one time activity, the <strong>create</strong> method within SecureStorgae will create the storage if it's not present, else it won't do anything.</p>\n<p><strong>Note: SecureStorage plugin will throw error, if there no lock screen is set  with pin/pattern to mobile. Many new developers have reported this as bug, but the cause always seem to be no lock screen.</strong></p>\n<p>Now we can set our key anywhere in the example, for demo purpose we will set an key and try to fetch it within one page. Let's set this all in our home.ts, but before that we need to know about two methods:</p>\n<ul>\n<li><strong>set('keyName','KeyValue')</strong> : This method will be used to set any key value with two parameters. it takes input in string type.</li>\n<li><strong>get('keyName')</strong> : This method is used to get key value from storage. It returns output in string format. </li>\n</ul>\n<p>Update home.html and home.ts as shown below</p>\n<p><strong>home.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;ion-header&gt;  \n  &lt;ion-navbar&gt;    \n    &lt;ion-title&gt;      \n      Secure Storage Example    \n    &lt;/ion-title&gt;  \n  &lt;/ion-navbar&gt;\n&lt;/ion-header&gt; \n&lt;ion-content padding&gt; \n  &lt;ion-list&gt;    \n    &lt;ion-list-header&gt;      \n      Set Key Value    \n    &lt;/ion-list-header&gt;    \n    &lt;ion-item&gt;      \n      &lt;ion-label floating&gt;Set Key&lt;/ion-label&gt;      \n      &lt;ion-input type=&quot;text&quot; [(ngmodel)]=&quot;setValue&quot;&gt;&lt;/ion-input&gt;    \n    &lt;/ion-item&gt;    \n    &lt;ion-item&gt;      \n      &lt;button ion-button (click)=&quot;setKey()&quot;&gt;Set&lt;/button&gt;    \n    &lt;/ion-item&gt;    \n    &lt;ion-list-header&gt;     \n      Get Key Value    \n    &lt;/ion-list-header&gt;    \n    &lt;ion-item&gt;      \n      &lt;button ion-button (click)=&quot;getKey()&quot;&gt;Get&lt;/button&gt;   \n    &lt;/ion-item&gt;    \n    &lt;ion-item&gt;      \n      &lt;p&gt;Get Key value: {{getValue}}&lt;/p&gt;    \n    &lt;/ion-item&gt;  cover\n  &lt;/ion-list&gt;\n&lt;/ion-content&gt;</code></pre></div>\n<p><strong>home.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Component } from &#39;@angular/core&#39;;\nimport { NavController } from &#39;ionic-angular&#39;;\nimport { SecureStorage } from &#39;ionic-native&#39;; \n@Component({  \n  selector: &#39;page-home&#39;,  \n  templateUrl: &#39;home.html&#39;})\nexport class HomePage {  \n  private getValue: string;  \n  private setValue: string;   \n  constructor(public navCtrl: NavController, public secureStorage: SecureStorage) {  }  \n  private setKey():void {    \n    //set token/key for your application, although you can set anywhere    console.log(&#39;set called&#39;);    \n    console.log(this.secureStorage);    \n    this.secureStorage.set(&#39;mytoken&#39;, this.setValue)      \n    .then(      \n      data =&gt; console.log(data),      \n      error =&gt; console.log(error)      \n    );  \n  }  \n\n  private getKey():void {    \n    console.log(&#39;get called&#39;);    \n    this.secureStorage.get(&#39;mytoken&#39;)      \n    .then(      \n      data =&gt; {        \n        this.getValue = data;      \n        },      \n      error =&gt; {        \n        console.log(error)      \n        }      \n      );  \n    }\n  }</code></pre></div>\n<p>Here in setkey(), we will first try to set the value for our key by calling set() method of Secure Storage. In getKey() we try to fetch the same value from secure storage. This marks the end of our simple example. <a href=\"https://github.com/nitishkumar71/SecureStorageExample\">Github link for Example</a></p>","id":"1ea9fafc-aad2-5008-a999-90f9b776ed2e"}},"pageContext":{"pathSlug":"/2019-03-31-ionic2-secure-storage-in-mobile-application/","next":{"fields":{"slug":"/2019-04-01-ionic2-security-for-cordova-mobile-applications/"},"frontmatter":{"title":"Ionic2 - Security for Cordova mobile applications"},"fileAbsolutePath":"/media/nitish/3E1698381697EEE1/Practice/blog.nitishkumarsingh.xyz/posts/2019-04-01-ionic2-security-for-cordova-mobile-applications.md"},"previous":{"fields":{"slug":"/2019-03-31-ionic2-hammer-js-example/"},"frontmatter":{"title":"Ionic2 - Hammer JS Example"},"fileAbsolutePath":"/media/nitish/3E1698381697EEE1/Practice/blog.nitishkumarsingh.xyz/posts/2019-03-31-ionic2-hammer-js-example.md"}}}